import{r as o,j as e,a as M,u as O,F as U,f as Ne,L as F,b as ee,c as se,d as ae,e as re,g as te,h as we,i as ne,k as oe,l as ie,m as ce,n as le,o as ye,p as Ee,O as de,q as me,s as Z,t as Ce,v as Se,w as ke,x as qe,y as G,z as Ae,N as ue,B as ze,R as De,A as P,C as $e}from"./vendor-B8qlGJRm.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))m(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&m(l)}).observe(document,{childList:!0,subtree:!0});function u(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function m(c){if(c.ep)return;c.ep=!0;const i=u(c);fetch(c.href,i)}})();const he=o.createContext(),Ie=({children:s})=>{const[a,u]=o.useState([]),m=async()=>{try{const t=await M.get("https://backend-mywf.onrender.com/api/festividad/festividades");u(t.data)}catch(r){console.error("❌ Error al listar los eventos:",r),setTimeout(()=>m(),5e3)}},c=async r=>{try{const t=`https://backend-mywf.onrender.com/api/festividad/detalle/${r}`;return(await M.get(t)).data}catch(t){throw console.error("❌ Error al obtener detalle del evento:",t),t}},i=async r=>{try{const t=localStorage.getItem("token"),d="https://backend-mywf.onrender.com/api/festividad/crear",N={headers:{Authorization:`Bearer ${t}`}};return(await M.post(d,r,N)).data}catch(t){throw console.error("❌ Error al crear el evento:",t),t}},l=async(r,t)=>{try{const d=localStorage.getItem("token"),N=`https://backend-mywf.onrender.com/api/festividad/actualizar/${r}`,q={headers:{Authorization:`Bearer ${d}`}};return(await M.put(N,t,q)).data}catch(d){throw console.error("❌ Error al actualizar el evento:",d),d}},p=async r=>{try{const t=localStorage.getItem("token"),d=`https://backend-mywf.onrender.com/api/festividad/eliminar/${r}`,N={headers:{Authorization:`Bearer ${t}`}};return(await M.delete(d,N)).data}catch(t){throw console.error("❌ Error al eliminar el evento:",t),t}},n=async r=>{try{const t=`https://backend-mywf.onrender.com/api/festividad/festividades-por-mes/${r}`;return(await M.get(t)).data}catch(t){throw console.error("❌ Error al listar eventos por mes:",t),t}};return o.useEffect(()=>{m()},[]),e.jsx(he.Provider,{value:{eventos:a,listarEventos:m,obtenerDetalleEvento:c,crearEvento:i,actualizarEvento:l,eliminarEvento:p,listarEventosPorMes:n},children:s})},Fe=({toggleSidebar:s})=>{const[a,u]=o.useState(!1),[m,c]=o.useState(null),[i,l]=o.useState(!1),[p,n]=o.useState(null),[r,t]=o.useState([]),{listarEventosPorMes:d}=o.useContext(he),N=O();o.useEffect(()=>{const x=localStorage.getItem("token"),h=localStorage.getItem("tipoUsuario");u(!!x),c(h)},[]);const q=()=>{localStorage.removeItem("token"),localStorage.removeItem("tipoUsuario"),u(!1),c(null),N("/"),window.location.reload()},C=async x=>{n(x);try{const h=await d(x);t(h[x]||[])}catch(h){console.error("Error al obtener festividades del mes:",h)}},g=()=>{n(null),t([])},w=()=>{l(!i)},f=x=>{N(`/searches?month=${x}`)},v=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return e.jsxs("nav",{className:"navbar px-4",children:[e.jsx("button",{className:"menu-btn",onClick:s,children:e.jsx(U,{icon:Ne})}),e.jsxs(F,{to:"/",className:"navbar-logo",children:[e.jsx("img",{src:"/logo.png",alt:"Logo"}),e.jsx("span",{className:"navbar-title",children:"Megadisfraz"})]}),e.jsx("ul",{className:"navbar-meses",children:v.map(x=>e.jsxs("li",{className:"nav-item",onMouseEnter:()=>C(x),onMouseLeave:g,children:[e.jsx("button",{className:"month-link",onClick:()=>f(x),children:x}),p===x&&r.length>0&&e.jsxs("div",{className:"event-dropdown",children:[e.jsx("div",{className:"event-dropdown-header",children:e.jsxs("h4",{children:["Eventos en ",x]})}),e.jsx("ul",{className:"event-list",children:r.map(h=>e.jsxs("li",{className:"event-item",onClick:()=>N(`/searches?event=${encodeURIComponent(h.nombre)}`),children:[e.jsx("span",{className:"event-day",children:h.dia}),e.jsxs("div",{children:[e.jsx("div",{className:"event-name",children:h.nombre}),h.descripcion&&e.jsx("div",{className:"event-desc",children:h.descripcion})]})]},h.id))})]})]},x))}),e.jsx("div",{className:"navbar-auth",children:a?e.jsxs(e.Fragment,{children:[e.jsx(F,{to:"/perfil",className:"icon-btn profile-icon",title:"Perfil",children:e.jsx(U,{icon:se})}),e.jsx("button",{className:"icon-btn logout-icon",onClick:q,title:"Cerrar Sesión",children:e.jsx(U,{icon:ae})}),(m==="admin"||m==="moderador")&&e.jsxs("div",{className:"admin-menu-container",children:[e.jsxs("button",{className:"icon-btn admin-icon",onClick:w,title:"Administrador",children:[e.jsx(U,{icon:re})," ",e.jsx(U,{icon:te})]}),i&&e.jsxs("div",{className:"admin-menu",children:[m==="admin"&&e.jsx(F,{to:"/administradores",className:"admin-menu-item",children:"Administradores"}),e.jsx(F,{to:"/eventos",className:"admin-menu-item",children:"Eventos"}),e.jsx(F,{to:"/disfraces",className:"admin-menu-item",children:"Disfraces"}),e.jsx(F,{to:"/etiquetas",className:"admin-menu-item",children:"Etiquetas"})]})]})]}):e.jsx(F,{to:"/login",className:"icon-btn login-icon",title:"Iniciar Sesión",children:e.jsx(U,{icon:ee})})})]})},H=o.createContext(),Me=({children:s})=>{const[a,u]=o.useState([]),m=async()=>{try{const t=await M.get("https://backend-mywf.onrender.com/api/disfraz/listar");u(t.data)}catch(r){console.error("❌ Error al listar los disfraces:",r),setTimeout(()=>m(),5e3)}},c=async r=>{try{const t=`https://backend-mywf.onrender.com/api/disfraz/detalle/${r}`;return(await M.get(t)).data}catch(t){throw console.error("❌ Error al obtener detalle del disfraz:",t),t}},i=async r=>{try{const t=localStorage.getItem("token"),d="https://backend-mywf.onrender.com/api/disfraz/registro",N={headers:{Authorization:`Bearer ${t}`}};return(await M.post(d,r,N)).data}catch(t){throw console.error("❌ Error al registrar disfraz:",t),t}},l=async(r,t)=>{try{const d=localStorage.getItem("token"),N=`https://backend-mywf.onrender.com/api/disfraz/actualizar/${r}`,q={headers:{Authorization:`Bearer ${d}`}};return(await M.put(N,t,q)).data}catch(d){throw console.error("❌ Error al actualizar el disfraz:",d),d}},p=async r=>{try{const t=localStorage.getItem("token"),d=`https://backend-mywf.onrender.com/api/disfraz/eliminar/${r}`,N={headers:{Authorization:`Bearer ${t}`}};return(await M.delete(d,N)).data}catch(t){throw console.error("❌ Error al eliminar el disfraz:",t),t}},n=r=>a.filter(t=>t.categoria===r);return o.useEffect(()=>{m()},[]),e.jsx(H.Provider,{value:{disfraces:a,setDisfraces:u,listarDisfraces:m,obtenerDetalleDisfraz:c,registrarDisfraz:i,actualizarDisfraz:l,eliminarDisfraz:p,filtrarDisfracesPorCategoria:n},children:s})},Le="/assets/coso-DREvTNrd.gif",K=[{label:"1ra Sucursal: YARUQUI CENTRO",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d249.3626477649494!2d-78.31752496658034!3d-0.16204089881778425!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x91d593004a7fa75f%3A0x5eea80851419080a!2sMegadisfraz!5e0!3m2!1ses-419!2sec!4v1740273750468!5m2!1ses-419!2sec"},{label:"2da Sucursal: CAYAMBE CENTRO",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d296.54494697342307!2d-78.14407258761588!3d0.04045211760451157!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e2a08f745888e7b%3A0x836a42c1eea0bfb1!2sCentro%20Comercial%20de%20Vendedores%20Aut%C3%B3nomos!5e0!3m2!1ses-419!2sec!4v1740273826714!5m2!1ses-419!2sec"},{label:"3ra Sucursal: YARUQUI - UPC",src:"https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d249.36266087396976!2d-78.3181939994935!3d-0.16097235436319585!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1ses-419!2sec"}];function pe(){const[s,a]=o.useState(K[0].src);return e.jsxs("div",{className:"mapa-wrapper",children:[e.jsx("h2",{className:"sidebar-title",children:"Mapa Sucursales"}),e.jsxs("div",{className:"mapa-layout",children:[e.jsx("ul",{className:"sucursales-list",children:K.map((u,m)=>e.jsx("li",{onClick:()=>a(u.src),children:u.label},m))}),e.jsxs("div",{className:"map-container",children:[e.jsx(U,{icon:we,className:"map-icon"}),e.jsx("iframe",{title:"mapa-sucursales",src:s,width:"100%",height:"200",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})]}),e.jsx("div",{className:"local-image",children:e.jsx("img",{src:Le,alt:"Local"})})]}),e.jsxs("div",{className:"social-icons",children:[e.jsx("a",{href:"https://www.instagram.com/megadisfraz_yaruqui?igsh=dHJwd3hmaHU2aTNq",children:e.jsx(ne,{})}),e.jsx("a",{href:"https://x.com/Megadisfraz?t=IxW60maTBR2FoOO_RNDDeQ&s=09",children:e.jsx(oe,{})}),e.jsx("a",{href:"https://www.tiktok.com/@megadisfraz_yaruqui?_t=ZM-8wGmbrvw46Y&_r=1",children:e.jsx(ie,{})})]}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsxs("a",{href:"https://wa.me/593939232766",children:[e.jsx(ce,{}),"Whatsapp."]})}),e.jsx("li",{children:e.jsx("a",{href:"webmegadisfraz513@gmail.com",children:"Gmail."})})]}),e.jsx("p",{className:"footer-text",children:"© 2025 Megadisfraz"})]})}const Pe=({sidebarOpen:s,toggleSidebar:a})=>{const[u,m]=o.useState([]),[c,i]=o.useState(""),[l,p]=o.useState(!1),n=O(),r=le(),{disfraces:t}=o.useContext(H),d=localStorage.getItem("tipoUsuario"),N=()=>{p(g=>!g)};o.useEffect(()=>{(async()=>{try{const w=await fetch("https://backend-mywf.onrender.com/api/etiqueta/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!w.ok)throw new Error("Error al obtener las etiquetas");const f=await w.json();m(f)}catch(w){console.error("Error al cargar las etiquetas:",w)}})()},[]);const q=g=>{const w=new URLSearchParams(r.search);w.set("etiqueta",g),n(`/searches?${w.toString()}`),a()},C=()=>{c.trim()&&t.filter(w=>w.nombre.toLowerCase().includes(c.toLowerCase())||w.descripcion.toLowerCase().includes(c.toLowerCase())).length>0&&(n(`/searches?query=${c}`),a())};return o.useEffect(()=>(s?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open"),()=>document.body.classList.remove("sidebar-open")),[s]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`overlay ${s?"active":""}`,onClick:a}),e.jsxs("aside",{className:`sidebar ${s?"active":""}`,children:[e.jsxs("div",{className:"sidebar-top",children:[e.jsx("button",{className:"close-btn",onClick:a,children:e.jsx(U,{icon:ye})}),e.jsx("div",{className:"sidebar-auth-icons",children:localStorage.getItem("token")?e.jsxs("div",{className:"auth-icons-wrapper",children:[e.jsx(F,{to:"/perfil",className:"icon-btn profile-icon",title:"Perfil",children:e.jsx(U,{icon:se})}),e.jsx("button",{className:"icon-btn logout-icon",title:"Cerrar Sesión",onClick:()=>{localStorage.clear(),window.location.reload()},children:e.jsx(U,{icon:ae})}),(d==="admin"||d==="moderador")&&e.jsxs("div",{className:"admin-menu-container",children:[e.jsxs("button",{className:"icon-btn admin-icon",onClick:N,title:"Administrador",children:[e.jsx(U,{icon:re})," ",e.jsx(U,{icon:te})]}),l&&e.jsxs("div",{className:"admin-menu",children:[d==="admin"&&e.jsx(F,{to:"/administradores",className:"admin-menu-item",children:"Administradores"}),e.jsx(F,{to:"/eventos",className:"admin-menu-item",children:"Eventos"}),e.jsx(F,{to:"/disfraces",className:"admin-menu-item",children:"Disfraces"}),e.jsx(F,{to:"/etiquetas",className:"admin-menu-item",children:"Etiquetas"})]})]})]}):e.jsx(F,{to:"/login",className:"icon-btn login-icon",title:"Iniciar Sesión",children:e.jsx(U,{icon:ee})})})]}),e.jsxs("div",{className:"search-container",children:[e.jsx("input",{type:"text",placeholder:"Buscar",value:c,onChange:g=>i(g.target.value),onKeyDown:g=>{g.key==="Enter"&&(g.preventDefault(),C())},className:"search-input"}),e.jsx("button",{className:"search-btn",onClick:C,children:e.jsx(U,{icon:Ee})})]}),e.jsx("h2",{className:"sidebar-title",children:"Etiquetas"}),e.jsx("div",{className:"tags-container",children:u.map(g=>e.jsx("button",{className:"tag-button",onClick:()=>q(g.nombre),children:g.nombre},g.id))})]})]})},Ue=()=>e.jsxs("footer",{className:"footer",children:[e.jsxs("div",{className:"social-icons",children:[e.jsx("a",{href:"https://www.instagram.com/megadisfraz_yaruqui?igsh=dHJwd3hmaHU2aTNq",children:e.jsx(ne,{})}),e.jsx("a",{href:"https://x.com/Megadisfraz?t=IxW60maTBR2FoOO_RNDDeQ&s=09",children:e.jsx(oe,{})}),e.jsx("a",{href:"https://www.tiktok.com/@megadisfraz_yaruqui?_t=ZM-8wGmbrvw46Y&_r=1",children:e.jsx(ie,{})})]}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx("a",{href:"#",children:"Home"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"News"})}),e.jsx("li",{children:e.jsxs("a",{href:"https://wa.me/593939232766",children:[e.jsx(ce,{}),"Whatsapp."]})}),e.jsx("li",{children:e.jsx("a",{href:"webmegadisfraz513@gmail.com",children:"Gmail."})})]}),e.jsx("p",{className:"footer-text",children:"© 2025 Megadisfraz"})]}),Te=()=>{const[s,a]=o.useState(!1),u=()=>{a(!s)};return e.jsxs("div",{className:"parent",children:[e.jsxs("div",{className:"div1",children:[" ",e.jsx(Fe,{toggleSidebar:u})]}),e.jsx(Pe,{sidebarOpen:s,toggleSidebar:u}),e.jsxs("div",{className:"div3",children:[e.jsx(de,{})," "]}),e.jsxs("div",{className:"div4",children:[" ",e.jsx(Ue,{})]})]})},xe=o.createContext(),Oe=({children:s})=>{const[a,u]=o.useState({}),m=async l=>{try{const n="https://backend-mywf.onrender.com/api",r=localStorage.getItem("tipoUsuario");if(!r)throw new Error("Tipo de usuario no definido");const t=`${n}/admin/perfil`,d={headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}},N=await M.get(t,d);return u({usuario:N.data,rol:r}),N.data}catch(n){throw console.error("❌ Error al obtener el perfil:",n),n}},c=async(l,p)=>{try{const n=localStorage.getItem("token"),t=localStorage.getItem("tipoUsuario")==="admin"?`https://backend-mywf.onrender.com/api/admin/actualizar/${l}`:`https://backend-mywf.onrender.com/api/usuario/actualizar/${l}`,d={headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}},N=await M.put(t,p,d);return u(N.data),N.data}catch(n){throw console.error("❌ Error al actualizar el perfil:",n),n}},i=async l=>{try{const p=localStorage.getItem("token"),r=localStorage.getItem("tipoUsuario")==="admin"?"https://backend-mywf.onrender.com/api/admin/actualizar-password":"https://backend-mywf.onrender.com/api/usuario/actualizar-password",t={headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`}};return(await M.put(r,l,t)).data}catch(p){throw console.error("❌ Error al actualizar la contraseña:",p),p}};return o.useEffect(()=>{const l=localStorage.getItem("token");l&&m(l)},[]),e.jsx(xe.Provider,{value:{auth:a,setAuth:u,obtenerPerfil:m,actualizarPerfil:c,actualizarPassword:i},children:s})};function Q({className:s,children:a,...u}){return e.jsx("div",{className:me("bg-white rounded-xl shadow-lg overflow-hidden h-full transform transition-transform hover:scale-105",s),style:{border:"1px solid #ccc",boxShadow:"0 4px 8px rgba(10, 10, 10, 0.78)",transition:"transform 0.3s ease"},...u,children:a})}function Y({className:s,children:a,...u}){return e.jsx("div",{className:me("p-4 h-full",s),...u,children:a})}function fe(s){if(typeof s=="string")try{const a=JSON.parse(s);return Array.isArray(a)?a:[]}catch(a){return console.warn("normalizeImages: error al parsear",a),[]}return Array.isArray(s)?s:[]}function B({imagenes:s,index:a=0,alt:u="",className:m="",style:c={},placeholder:i="/placeholder-image.jpg",loading:l="lazy",...p}){const n=fe(s),[r,t]=o.useState(n[a]||i);return e.jsx("img",{src:r,alt:u,className:m,style:c,loading:l,onError:()=>t(i),...p})}function Re(){const s=O(),{disfraces:a=[]}=o.useContext(H),u=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],m=u[new Date().getMonth()],c=r=>{const t=[...u],d=t.indexOf(m),N=[...t.slice(d),...t.slice(0,d)].reverse();return[...r].sort((q,C)=>{if(!q.festividades||!C.festividades)return 0;const g=w=>{let f=-1;return w.festividades.forEach(v=>{const x=N.indexOf(v.mes);x>f&&(f=x)}),f};return g(C)-g(q)})},i=r=>[...r].sort((t,d)=>{if(!t.festividades||!d.festividades)return 0;const N=q=>{const C=q.festividades.filter(g=>g.mes===m);return C.length?Math.min(...C.map(g=>g.dia)):1/0};return N(t)-N(d)}),l=a.length?i(a.filter(r=>{var t;return(t=r.festividades)==null?void 0:t.some(d=>d.mes===m)})):[],p=c(a),n=r=>{s(`/productos/${r.id}`)};return e.jsxs("div",{className:"store-container",children:[e.jsx("section",{className:"carousel-section",style:{maxWidth:"80%",margin:"auto"},children:e.jsxs("div",{id:"carouselExampleIndicators",className:"carousel slide","data-bs-ride":"carousel",children:[e.jsx("div",{className:"carousel-indicators",children:a.map((r,t)=>e.jsx("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":t,className:t===0?"active":"","aria-current":t===0?"true":"false","aria-label":`Slide ${t+1}`},t))}),e.jsx("div",{className:"carousel-inner",children:a.map((r,t)=>e.jsxs("div",{className:`carousel-item ${t===0?"active":""}`,onClick:()=>n(r),children:[e.jsx(B,{imagenes:r.imagenes,alt:r.nombre,className:"carousel-image",style:{height:"500px",width:"100%",objectFit:"scale-down"}}),e.jsx("div",{className:"carousel-caption d-none d-md-block",children:e.jsx("p",{className:"carousel-text",style:{color:"black"},children:r.nombre})})]},r.id))}),e.jsxs("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"prev",children:[e.jsx("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Previous"})]}),e.jsxs("button",{className:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"next",children:[e.jsx("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Next"})]})]})}),e.jsxs("section",{className:"new-arrivals",children:[e.jsxs("h2",{className:"titulo",children:["Disfraces de ",m]}),e.jsx("div",{className:"new-arrivals-container",children:l.length?l.map(r=>e.jsxs(Q,{className:"new-arrival-card",onClick:()=>n(r),children:[e.jsx(B,{imagenes:r.imagenes,alt:r.nombre,className:"arrival-image"}),e.jsx(Y,{children:e.jsx("p",{children:r.nombre})})]},r.id)):e.jsxs("p",{className:"no-disfraces",children:["No hay disfraces disponibles para ",m,"."]})})]}),e.jsx(pe,{}),e.jsxs("section",{className:"all-disfraces",children:[e.jsx("h2",{className:"all-title",children:"Todos los Disfraces"}),e.jsx("div",{className:"all-container",children:p.length?p.map(r=>{var t;return(t=r.festividades)==null||t.reduce((d,N)=>{const q=u.indexOf(d.mes);return u.indexOf(N.mes)>q?N:d},{mes:"Enero",dia:1}),e.jsxs(Q,{className:"all-card",onClick:()=>n(r),children:[e.jsx(B,{imagenes:r.imagenes,alt:r.nombre,className:"all-image"}),e.jsx(Y,{children:e.jsx("p",{children:r.nombre})})]},r.id)}):e.jsx("p",{className:"no-disfraces",children:"Cargando disfraces..."})})]})]})}const Be=()=>{var v,x;const{obtenerDetalleDisfraz:s,disfraces:a}=o.useContext(H),{id:u}=Z(),m=O(),[c,i]=o.useState(null),[l,p]=o.useState(!0),[n,r]=o.useState(null),t=h=>`${h.nombre} - ${h.dia} de ${h.mes}`,d=h=>{const y=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return[...h].sort((A,b)=>{const j=y.indexOf(A.mes),k=y.indexOf(b.mes);return j!==k?j-k:A.dia-b.dia})};if(o.useEffect(()=>{(async()=>{var y;try{p(!0);const A=await s(u);(y=A==null?void 0:A.festividades)!=null&&y.length&&(A.festividades=d(A.festividades)),i(A??null)}catch{r("Error al cargar los detalles del producto")}finally{p(!1)}})()},[u,s]),l)return e.jsx("div",{className:"loading-message",children:"Cargando detalles del producto..."});if(n)return e.jsx("div",{className:"error-message",children:n});if(!c)return e.jsx("div",{className:"producto-no-encontrado",children:"Producto no encontrado"});const N=fe(c.imagenes),q=a.filter(h=>h.id!==Number(u)),C=h=>m(`/productos/${h.id}`),g=q.filter(h=>{var y;return(y=h.etiquetas)==null?void 0:y.some(A=>{var b;return(b=c.etiquetas)==null?void 0:b.some(j=>j.id===A.id)})}),w=q.filter(h=>{var y;return(y=h.festividades)==null?void 0:y.some(A=>{var b;return(b=c.festividades)==null?void 0:b.some(j=>A.nombre===j.nombre&&A.dia===j.dia&&A.mes===j.mes)})}),f=q.filter(h=>{var y;return(y=h.festividades)==null?void 0:y.some(A=>{var b;return(b=c.festividades)==null?void 0:b.some(j=>A.mes===j.mes)})});return e.jsxs("div",{className:"product-detail-wrapper",children:[e.jsxs("div",{className:"parent-ProductDetail",children:[e.jsx("div",{className:"product-img",children:e.jsxs("div",{id:"carouselExampleIndicators",className:"carousel slide",children:[e.jsx("div",{className:"carousel-indicators",children:N.map((h,y)=>e.jsx("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":y,className:y===0?"active":"","aria-label":`Slide ${y+1}`},y))}),e.jsx("div",{className:"carousel-inner",children:N.map((h,y)=>e.jsx("div",{className:`carousel-item ${y===0?"active":""}`,children:e.jsx("div",{className:"carousel-image-wrapper",children:e.jsx(B,{imagenes:c.imagenes,index:y,alt:c.nombre,className:"d-block w-100"})})},y))}),N.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"prev",children:[e.jsx("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Previous"})]}),e.jsxs("button",{className:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"next",children:[e.jsx("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Next"})]})]})]})}),e.jsxs("div",{className:"product-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",c.nombre]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Descripción:"})," ",c.descripcion||"No hay descripción disponible."]}),e.jsx("p",{children:e.jsx("strong",{children:"Evento:"})}),(v=c.festividades)!=null&&v.length?e.jsx("ul",{className:"festividades-list",children:c.festividades.map((h,y)=>e.jsx("li",{children:t(h)},y))}):e.jsx("p",{children:"Evento no disponible"}),e.jsx("p",{children:e.jsx("strong",{children:"Etiquetas:"})}),e.jsx("ul",{className:"product-prendas",children:(x=c.etiquetas)!=null&&x.length?c.etiquetas.map(h=>e.jsx("li",{children:h.nombre},h.id)):e.jsx("li",{children:"No hay etiquetas disponibles."})})]})]}),e.jsx("div",{className:"product-mapa",children:e.jsx(pe,{})}),e.jsxs("div",{className:"product-related",children:[e.jsx("h2",{className:"titulo",children:"Disfraces con las mismas etiquetas"}),e.jsx("div",{className:"productos-similares-container",children:e.jsx("div",{className:"productos-similares-lista",children:g.length?g.slice(0,6).map((h,y)=>e.jsxs("div",{className:"producto-similar",onClick:()=>C(h),children:[e.jsx(B,{imagenes:h.imagenes,alt:h.nombre,className:"d-block w-100"}),e.jsx("p",{children:h.nombre})]},y)):e.jsx("p",{children:"No existen disfraces que coincidan en etiquetas."})})}),e.jsx("h2",{className:"titulo",children:"Disfraces de los mismos eventos"}),e.jsx("div",{className:"productos-similares-container",children:e.jsx("div",{className:"productos-similares-lista",children:w.length?w.slice(0,6).map((h,y)=>e.jsxs("div",{className:"producto-similar",onClick:()=>C(h),children:[e.jsx(B,{imagenes:h.imagenes,alt:h.nombre,className:"d-block w-100"}),e.jsx("p",{children:h.nombre})]},y)):e.jsx("p",{children:"No existen disfraces que coincidan en eventos."})})}),e.jsx("h2",{className:"titulo",children:"Disfraces del mismo mes"}),e.jsx("div",{className:"productos-similares2-container",children:e.jsx("div",{className:"productos-similares-lista",children:f.length?f.slice(0,6).map((h,y)=>e.jsxs("div",{className:"producto-similar",onClick:()=>C(h),children:[e.jsx(B,{imagenes:h.imagenes,alt:h.nombre,className:"d-block w-100"}),e.jsx("p",{children:h.nombre})]},y)):e.jsx("p",{children:"No existen disfraces que coincidan en el mes."})})})]})]})},W=({children:s,tipo:a})=>{const u=a==="success"?"success":"error",m=a==="success"?Ce:Se;return e.jsxs("div",{className:`mensaje-container ${u}`,children:[e.jsx(U,{icon:m,className:"mensaje-icon"}),e.jsx("div",{className:"mensaje-text",children:e.jsx("p",{children:s})})]})},Je=()=>{const[s,a]=o.useState({email:"",password:"",tipoUsuario:"usuario"}),[u,m]=o.useState({}),c=O(),i=p=>{a({...s,[p.target.name]:p.target.value})},l=async p=>{var n,r;p.preventDefault();try{const t=s.tipoUsuario==="admin"||s.tipoUsuario==="moderador"?"https://backend-mywf.onrender.com/api/admin/login":"https://backend-mywf.onrender.com/api/usuario/login",d=await M.post(t,s);if(d!=null&&d.data)m({respuesta:d.data.msg,tipo:!0}),d.data.token&&(localStorage.setItem("token",d.data.token),localStorage.setItem("tipoUsuario",d.data.rol),console.log("Rol guardado en localStorage:",d.data.rol),d.data.rol==="admin"||d.data.rol==="moderador"||d.data.rol==="usuario"?c("/"):m({respuesta:"Rol desconocido",tipo:!1})),a({email:"",password:"",tipoUsuario:"usuario"});else throw new Error("Respuesta inesperada del servidor")}catch(t){const d=((r=(n=t.response)==null?void 0:n.data)==null?void 0:r.msg)||"Error al iniciar sesión";m({respuesta:d,tipo:!1}),console.error("Error:",t.message)}};return e.jsxs("div",{className:"login-body",children:[e.jsx(F,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[e.jsx("h2",{className:"text-center mb-4",children:"Iniciar sesión"}),e.jsxs("form",{id:"login-form",onSubmit:l,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Correo electrónico:"}),e.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",value:s.email,onChange:i,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Contraseña:"}),e.jsx("input",{type:"password",className:"form-control",id:"password",name:"password",value:s.password,onChange:i,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tipo de usuario:"}),e.jsxs("select",{name:"tipoUsuario",className:"form-control",onChange:i,value:s.tipoUsuario,children:[e.jsx("option",{value:"usuario",children:"Usuario"}),e.jsx("option",{value:"admin",children:"Administrador"}),e.jsx("option",{value:"moderador",children:"Moderador"})]})]}),e.jsx("p",{className:"forgot-password",children:e.jsx(F,{to:"/forgot/id",className:"forgot-link",children:"¿Olvidaste tu contraseña?"})}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Iniciar sesión"}),e.jsxs("p",{className:"text-center mt-3",children:["¿No tienes una cuenta?"," ",e.jsx(F,{to:"/register",className:"register-link",children:"Regístrate"})]})]}),u.respuesta&&e.jsx(W,{tipo:u.tipo?"success":"error",children:u.respuesta})]})]})},_e=()=>{const[s,a]=o.useState({nombre:"",apellido:"",email:"",password:""}),[u,m]=o.useState({respuesta:"",tipo:""}),c=O(),i=p=>{a({...s,[p.target.name]:p.target.value})},l=async p=>{p.preventDefault();const n=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/;if(!s.nombre.trim()||!s.apellido.trim()||!s.email.trim()||!s.password.trim()){m({respuesta:"Todos los campos son obligatorios.",tipo:"error"});return}if(!n.test(s.nombre)||!n.test(s.apellido)){m({respuesta:"El nombre y apellido solo pueden contener letras y espacios.",tipo:"error"});return}try{const t=await M.post("https://backend-mywf.onrender.com/api/usuario/registro",s);t&&t.data?(m({respuesta:t.data.msg,tipo:"success"}),setTimeout(()=>{m({respuesta:"",tipo:""}),c("/login")},3e3),a({nombre:"",apellido:"",email:"",password:""})):m({respuesta:"Algo salió mal",tipo:"error"})}catch(r){const t=r.response&&r.response.data?r.response.data.msg:"Error al registrar";m({respuesta:t,tipo:"error"})}};return e.jsxs("div",{className:"login-body",children:[e.jsx(F,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[e.jsx("h2",{className:"text-center mb-4",children:"Registro"}),e.jsxs("form",{id:"login-form",onSubmit:l,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",className:"form-control",id:"nombre",name:"nombre",value:s.nombre,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"apellido",children:"Apellido:"}),e.jsx("input",{type:"text",className:"form-control",id:"apellido",name:"apellido",value:s.apellido,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Correo Electrónico:"}),e.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",value:s.email,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Contraseña:"}),e.jsx("input",{type:"password",className:"form-control",id:"password",name:"password",value:s.password,onChange:i})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Registrarse"}),e.jsxs("p",{className:"text-center mt-3",children:["¿Ya tienes una cuenta?"," ",e.jsx(F,{to:"/login",className:"login-link",children:"Inicia Sesión"})]})]}),u.respuesta&&e.jsx(W,{tipo:u.tipo,children:u.respuesta})]})]})},He=()=>{const{token:s}=Z(),[a,u]=o.useState({respuesta:"",tipo:null});return o.useEffect(()=>{(async()=>{var c,i;try{const l=`https://backend-mywf.onrender.com/api/usuario/confirmar/${s}`,p=await M.get(l);u({respuesta:p.data.msg,tipo:"success"})}catch(l){u({respuesta:((i=(c=l.response)==null?void 0:c.data)==null?void 0:i.msg)||"Error al confirmar cuenta",tipo:"error"})}})()},[s]),e.jsxs("div",{className:"login-body",children:[e.jsx(F,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[e.jsx("h2",{className:"text-center mb-4",children:"Confirmación de Cuenta"}),a.respuesta&&e.jsx(W,{tipo:a.tipo,children:a.respuesta}),e.jsx("div",{className:"confirmar-circle",children:e.jsx(U,{icon:ke,className:"confirmar-icon"})}),e.jsx("p",{className:"text-center confirmar-texto-gracias",children:"¡Gracias por confirmar tu cuenta!"}),e.jsx("p",{className:"text-center confirmar-texto-iniciar",children:"Ahora puedes iniciar sesión."}),e.jsx(F,{to:"/login",className:"confirmar-link",children:"Iniciar Sesión"})]})]})},Ge=()=>{const[s,a]=o.useState({}),[u,m]=o.useState({email:"",tipoUsuario:"usuario"}),c=l=>{m({...u,[l.target.name]:l.target.value})},i=async l=>{var p,n;l.preventDefault();try{const r=u.tipoUsuario==="admin"?"https://backend-mywf.onrender.com/api/admin/recuperar-password":"https://backend-mywf.onrender.com/api/usuario/recuperar-password",t=await M.post(r,{email:u.email});a({respuesta:t.data.msg,tipo:"success"}),m({email:"",tipoUsuario:"usuario"})}catch(r){a({respuesta:((n=(p=r.response)==null?void 0:p.data)==null?void 0:n.msg)||"Error al recuperar contraseña",tipo:"error"})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"login-body",children:[e.jsx(F,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[s.respuesta&&e.jsx(W,{tipo:s.tipo,children:s.respuesta}),e.jsx("h1",{className:"text-center mb-4",children:"¡Olvidaste tu contraseña!"}),e.jsx("h3",{className:"text-center mb-4",children:"No te preocupes, ingresa tu correo"}),e.jsxs("form",{onSubmit:i,children:[e.jsxs("div",{className:"login-form-group",children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Email"}),e.jsx("input",{type:"email",placeholder:"Enter your email",className:"form-control",name:"email",value:u.email,onChange:c})]}),e.jsxs("div",{className:"login-form-group",children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Tipo de Usuario"}),e.jsxs("select",{className:"form-control",name:"tipoUsuario",value:u.tipoUsuario,onChange:c,children:[e.jsx("option",{value:"usuario",children:"Usuario"}),e.jsx("option",{value:"admin",children:"Administrador"})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Enviar Correo"})})]}),e.jsxs("div",{className:"text-center mt-3",children:[e.jsx("p",{children:"Si la recuerdas"}),e.jsx(F,{to:"/login",className:"register-link",children:"Login"})]})]})]}),e.jsx("div",{className:"forgot-background"})]})},We=()=>{const{token:s}=Z(),a=O(),[u,m]=o.useState(!1),[c,i]=o.useState({password:"",confirmpassword:""}),l=n=>{i({...c,[n.target.name]:n.target.value||""})},p=async n=>{n.preventDefault();try{const r=`https://backend-mywf.onrender.com/api/usuario/nuevo-password/${s}`,t=await M.post(r,c);i({password:"",confirmpassword:""}),G.success(t.data.msg),setTimeout(()=>{a("/login")},3e3)}catch(r){G.error(r.response.data.msg)}};return o.useEffect(()=>{(async()=>{try{const r=`https://backend-mywf.onrender.com/api/usuario/recuperar-password/${s}`,t=await M.get(r);m(!0),G.success(t.data.msg)}catch(r){G.error(r.response.data.msg)}})()},[s]),e.jsxs("div",{className:"login-body",children:[e.jsx(F,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[e.jsx(qe,{}),e.jsx("h1",{className:"text-center mb-4 text-3xl font-semibold uppercase text-gray-500",children:"Bienvenido Otra Vez"}),e.jsx("small",{className:"text-center text-gray-400 my-4 block text-sm",children:"Por favor ingresa los detalles"}),u&&e.jsxs("form",{className:"w-full",onSubmit:p,children:[e.jsxs("div",{className:"login-form-group",children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Password"}),e.jsx("input",{type:"password",placeholder:"Enter your password",className:"form-control",name:"password",value:c.password,onChange:l}),e.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Confirm Password"}),e.jsx("input",{type:"password",placeholder:"Repeat your password",className:"form-control",name:"confirmpassword",value:c.confirmpassword,onChange:l})]}),e.jsx("div",{className:"mb-3",children:e.jsx("button",{className:"btn btn-primary",children:"Enviar"})})]})]})]})},Xe=()=>{const s=O(),{auth:a,obtenerPerfil:u,actualizarPerfil:m,actualizarPassword:c}=o.useContext(xe),[i,l]=o.useState({passwordactual:"",password:"",confirmpassword:""}),[p,n]=o.useState(""),[r,t]=o.useState(""),[d,N]=o.useState(""),q=a==null?void 0:a.rol;o.useEffect(()=>{const v=localStorage.getItem("token");v?u(v).then(x=>{t(x.nombre),N(x.apellido)}).catch(()=>{n("Error al cargar el perfil.")}):s("/")},[s]);const C=()=>{localStorage.removeItem("token"),localStorage.removeItem("tipoUsuario"),s("/")},g=v=>{l({...i,[v.target.name]:v.target.value})},w=async v=>{v.preventDefault();const x=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/;if(!r.trim()||!d.trim()){n("El nombre y apellido no pueden estar vacíos.");return}if(!x.test(r)||!x.test(d)){n("El nombre y apellido solo pueden contener letras y espacios.");return}try{await m(a.usuario._id,{nombre:r,apellido:d}),n("Perfil actualizado con éxito."),setTimeout(()=>{s("/perfil")},1e3)}catch{n("Error al actualizar el perfil.")}},f=async v=>{if(v.preventDefault(),!i.passwordactual||!i.password||!i.confirmpassword){n("Todos los campos de contraseña son obligatorios.");return}if(i.password!==i.confirmpassword){n("Las contraseñas no coinciden.");return}try{await c({passwordactual:i.passwordactual,passwordnuevo:i.password}),n("Contraseña actualizada correctamente."),l({passwordactual:"",password:"",confirmpassword:""})}catch{n("Error al actualizar la contraseña.")}};return e.jsx("div",{className:"profile-container",children:e.jsxs("div",{className:"profile-wrapper",children:[e.jsx("h4",{className:"mb-4 text-center",children:q==="admin"?"Perfil de Administrador":"Perfil de Usuario"}),p&&e.jsx("div",{className:`alert ${p.includes("Error")?"alert-danger":"alert-success"}`,children:p}),a.usuario?e.jsxs("table",{className:"profile-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{class:"hidden-on-mobile",children:"ID de Usuario"}),e.jsx("th",{children:"Correo Electrónico"}),e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Apellido"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{class:"hidden-on-mobile",children:a.usuario._id}),e.jsx("td",{children:a.usuario.email}),e.jsx("td",{children:a.usuario.nombre}),e.jsx("td",{children:a.usuario.apellido})]})})]}):e.jsx("p",{children:"Cargando..."}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Nuevo Nombre"}),e.jsx("input",{type:"text",className:"profile-input",value:r,onChange:v=>t(v.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Nuevo Apellido"}),e.jsx("input",{type:"text",className:"profile-input",value:d,onChange:v=>N(v.target.value)})]}),e.jsx("button",{type:"submit",className:"btn btn-success profile-button",children:"Actualizar Perfil"})]}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Contraseña Actual"}),e.jsx("input",{type:"password",placeholder:"Ingrese su contraseña actual",className:"profile-input",name:"passwordactual",value:i.passwordactual,onChange:g})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Nueva Contraseña"}),e.jsx("input",{type:"password",placeholder:"Ingrese su nueva contraseña",className:"profile-input",name:"password",value:i.password,onChange:g})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Confirmar Contraseña"}),e.jsx("input",{type:"password",placeholder:"Repita su nueva contraseña",className:"profile-input",name:"confirmpassword",value:i.confirmpassword,onChange:g})]}),e.jsx("button",{type:"submit",className:"btn btn-success profile-button",children:"Actualizar Contraseña"})]}),e.jsx("div",{className:"d-flex justify-content-between mt-3",children:e.jsx("button",{type:"button",className:"btn btn-danger profile-button",onClick:C,children:"Cerrar Sesión"})})]})})},Qe=()=>e.jsxs("div",{className:"not-found-container",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"}),e.jsx("div",{className:"not-found-icon-wrapper",children:e.jsx(U,{icon:Ae,className:"not-found-icon"})}),e.jsx("div",{className:"not-found-content-wrapper",children:e.jsxs("div",{className:"not-found-content",children:[e.jsx("p",{className:"not-found-title",children:"Pagina no encontrada"}),e.jsx("p",{className:"not-found-text",children:"Lo sentimos, la pagina que buscas no se puedo encontrar"})]})})]}),Ye=()=>{const s=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],[a,u]=o.useState({mes:"",dia:"",nombre:"",descripcion:""}),[m,c]=o.useState([]),i=n=>{const r=["Abril","Junio","Septiembre","Noviembre"];return n==="Febrero"?Array.from({length:29},(t,d)=>d+1):r.includes(n)?Array.from({length:30},(t,d)=>d+1):Array.from({length:31},(t,d)=>d+1)};o.useEffect(()=>{a.mes&&(c(i(a.mes)),u(n=>({...n,dia:""})))},[a.mes]);const l=n=>{const{name:r,value:t}=n.target;u({...a,[r]:t})},p=async n=>{n.preventDefault();try{const r=await fetch("https://backend-mywf.onrender.com/api/festividad/crear",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({...a,dia:parseInt(a.dia,10)})});if(!r.ok)throw new Error("Error al crear el evento");await r.json(),alert("✅ Evento creado exitosamente")}catch{alert("❌ Hubo un problema al crear el evento")}};return e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{className:"tittle-crearev",children:"Crear Eventos"}),e.jsxs("form",{onSubmit:p,className:"form-content",children:[e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"mes",children:"Mes:"}),e.jsxs("select",{id:"mes",name:"mes",className:"form-input3",value:a.mes,onChange:l,required:!0,children:[e.jsx("option",{value:"",children:"-- Selecciona un mes --"}),s.map((n,r)=>e.jsx("option",{value:n,children:n},r))]})]}),e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"dia",children:"Día:"}),e.jsxs("select",{id:"dia",name:"dia",className:"form-input3",value:a.dia,onChange:l,required:!0,disabled:!a.mes,children:[e.jsx("option",{value:"",children:"-- Selecciona un día --"}),m.map(n=>e.jsx("option",{value:n.toString(),children:n},n))]})]}),e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre del evento o festividad:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input3",value:a.nombre,onChange:l,required:!0})]}),e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"descripcion",children:"Descripción de la festividad:"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input3",value:a.descripcion,onChange:l,required:!0})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Crear"})]})]})},Ze=()=>{const s=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],[a,u]=o.useState([]),[m,c]=o.useState([]),[i,l]=o.useState({mes:"",dia:"",nombre:"",descripcion:""}),[p,n]=o.useState([]),[r,t]=o.useState(!1),[d,N]=o.useState(null),[q,C]=o.useState("");o.useEffect(()=>{(async()=>{try{const y=await(await fetch("https://backend-mywf.onrender.com/api/festividad/festividades",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();u(y),c(y)}catch(h){console.error("Error al cargar eventos:",h),alert("Error al cargar eventos")}})()},[]),o.useEffect(()=>{if(q.trim()==="")c(a);else{const x=a.filter(h=>h.nombre.toLowerCase().includes(q.toLowerCase())||h.mes.toLowerCase().includes(q.toLowerCase())||h.dia.toString().includes(q));c(x)}},[q,a]),o.useEffect(()=>{if(i.mes){const x=i.mes==="Febrero"?Array.from({length:29},(h,y)=>y+1):["Abril","Junio","Septiembre","Noviembre"].includes(i.mes)?Array.from({length:30},(h,y)=>y+1):Array.from({length:31},(h,y)=>y+1);n(x),l(h=>({...h,dia:""}))}},[i.mes]);const g=x=>{const h=a.find(y=>y.id===x);h&&(l(h),N(x),t(!0))},w=async x=>{if(confirm("¿Estás seguro de eliminar este evento?"))try{if(!(await fetch(`https://backend-mywf.onrender.com/api/festividad/eliminar/${x}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error;alert("✅ Evento eliminado");const y=a.filter(A=>A.id!==x);u(y),c(y)}catch{alert("❌ Error al eliminar evento")}},f=x=>{const{name:h,value:y}=x.target;l(A=>({...A,[h]:y}))},v=async x=>{x.preventDefault();try{if(!(await fetch(`https://backend-mywf.onrender.com/api/festividad/actualizar/${d}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({...i,dia:parseInt(i.dia,10)})})).ok)throw new Error;alert("✅ Evento actualizado correctamente");const y=a.map(A=>A.id===d?{...A,...i}:A);u(y),c(y),t(!1),N(null)}catch{alert("❌ Error al actualizar el evento")}};return e.jsx("div",{className:"form-container",children:r?e.jsxs("form",{onSubmit:v,className:"form-content",children:[e.jsx("h2",{className:"admin-title",children:"Editar Festividad"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre del evento:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:i.nombre,onChange:f,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"mes",children:"Mes:"}),e.jsxs("select",{id:"mes",name:"mes",className:"form-input",value:i.mes,onChange:f,required:!0,children:[e.jsx("option",{value:"",children:"-- Selecciona un mes --"}),s.map((x,h)=>e.jsx("option",{value:x,children:x},h))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"dia",children:"Día:"}),e.jsxs("select",{id:"dia",name:"dia",className:"form-input",value:i.dia,onChange:f,disabled:!i.mes,required:!0,children:[e.jsx("option",{value:"",children:"-- Selecciona un día --"}),p.map(x=>e.jsx("option",{value:x,children:x},x))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descripcion",children:"Descripción:"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input",value:i.descripcion,onChange:f,required:!0,maxLength:250}),e.jsxs("p",{className:i.descripcion.length>=250?"text-error":"",children:[i.descripcion.length," / 250 caracteres"]})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Guardar Cambios"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>t(!1),children:"Cancelar"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"admin-title",children:"Lista de Festividades"}),e.jsxs("div",{className:"form-content",children:[e.jsx("label",{htmlFor:"busqueda",children:"Buscar por Nombre, Mes o Día:"}),e.jsx("input",{type:"text",id:"busqueda",name:"busqueda",className:"form-input",value:q,onChange:x=>C(x.target.value),placeholder:"Ingrese un nombre, mes o día"})]}),e.jsx("ul",{className:"disfraz-list",children:m.map(x=>e.jsxs("li",{className:"disfraz-item",children:[e.jsxs("div",{className:"disfraz-info",children:[e.jsx("strong",{children:x.nombre})," - ",x.mes,"/",x.dia,e.jsx("br",{}),e.jsx("small",{children:x.descripcion})]}),e.jsxs("div",{className:"disfraz-actions",children:[e.jsx("button",{className:"edit-button2",onClick:()=>g(x.id),children:"Actualizar"}),e.jsx("button",{className:"delete-button2",onClick:()=>w(x.id),children:"Eliminar"})]})]},x.id))})]})})},Ke=()=>{const[s,a]=o.useState(null);return e.jsxs("div",{className:"admin-container",children:[e.jsx("h1",{className:"admin-title",children:"Gestión de Eventos"}),e.jsxs("div",{className:"admin-buttons-container",children:[e.jsx("button",{className:"admin-button button-crear",onClick:()=>a("crear"),children:"Crear Evento"}),e.jsx("button",{className:"admin-button button-actualizar",onClick:()=>a("editar"),children:"Editar Evento"})]}),e.jsxs("div",{className:"admin-module-container",style:{marginTop:"20px"},children:[s==="crear"&&e.jsx(Ye,{}),s==="editar"&&e.jsx(Ze,{})]})]})},Ve=()=>{const s=le(),a=O(),{disfraces:u=[]}=o.useContext(H),[m,c]=o.useState(""),[i,l]=o.useState(""),[p,n]=o.useState(""),[r,t]=o.useState(""),d=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],N=f=>f?f.replace(/\|/g,"").trim():"";o.useEffect(()=>{const f=new URLSearchParams(s.search);c(f.get("query")||""),l(N(f.get("month")||"")),n(f.get("etiqueta")||""),t(f.get("event")||"")},[s]);const q=u.filter(f=>{var A,b,j,k;const v=m.toLowerCase(),x=i.toLowerCase(),h=p.toLowerCase(),y=r.toLowerCase();return(!m||f.nombre.toLowerCase().includes(v)||((A=f.descripcion)==null?void 0:A.toLowerCase().includes(v)))&&(!i||((b=f.festividades)==null?void 0:b.some(z=>z.mes.toLowerCase()===x)))&&(!p||((j=f.etiquetas)==null?void 0:j.some(z=>z.nombre.toLowerCase()===h)))&&(!r||((k=f.festividades)==null?void 0:k.some(z=>z.nombre.toLowerCase().includes(y))))}),g=(f=>{if(!f.length)return[];const v=d[new Date().getMonth()],x=d.indexOf(v),h=[...d.slice(x),...d.slice(0,x)].reverse();return[...f].sort((y,A)=>{const b=j=>{var z;let k=-1;return(z=j.festividades)==null||z.forEach(L=>{const T=h.indexOf(L.mes);T>k&&(k=T)}),k};return b(A)-b(y)})})(q),w=f=>a(`/productos/${f.id}`);return e.jsx("div",{className:"searches-container",children:e.jsxs("section",{className:"filtered-disfraces",children:[e.jsxs("h2",{className:"filtered-title",children:[m&&`Resultados para "${m}" `,i&&` Disfraces de ${i} `,p&&` Etiqueta: ${p} `,r&&` Evento: ${r}`]}),e.jsx("div",{className:"filtered-container",children:g.length?g.map(f=>{var v;return e.jsxs(Q,{className:"filtered-card",onClick:()=>w(f),children:[e.jsx(B,{imagenes:f.imagenes,alt:f.nombre,className:"filtered-image"}),e.jsxs(Y,{children:[e.jsx("p",{children:f.nombre}),((v=f.festividades)==null?void 0:v.length)>0&&e.jsxs("small",{children:["Festividades: ",f.festividades.map(x=>x.mes).join(", ")]})]})]},f.id)}):e.jsx("p",{className:"no-disfraces",children:"No se encontraron disfraces con los filtros aplicados"})})]})})},es=()=>{const[s,a]=o.useState({nombre:"",etiquetas:[],festividades:[],descripcion:"",imagenes:[]}),[u,m]=o.useState([]),[c,i]=o.useState([]),[l,p]=o.useState(!0),[n,r]=o.useState(null),[t,d]=o.useState(!1),N=b=>{const j=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return[...b].sort((k,z)=>{const L=j.indexOf(k.mes),T=j.indexOf(z.mes);return L!==T?L-T:k.dia-z.dia})},q=b=>[...b].sort((j,k)=>j.nombre.localeCompare(k.nombre));o.useEffect(()=>{(async()=>{try{const[j,k]=await Promise.all([fetch("https://backend-mywf.onrender.com/api/festividad/festividades",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("https://backend-mywf.onrender.com/api/etiqueta/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})]);if(!j.ok||!k.ok)throw new Error("Error al cargar datos iniciales");const[z,L]=await Promise.all([j.json(),k.json()]);m(N(z||[])),i(q(L||[])),p(!1)}catch(j){console.error("Error al cargar datos:",j),r("Hubo un problema al cargar los datos necesarios"),p(!1)}})()},[]);const C=b=>{const{name:j,value:k}=b.target;a(z=>({...z,[j]:k}))},g=b=>{const j=parseInt(b.target.value);if(j===-1){window.location.href="/etiquetas";return}s.etiquetas.includes(j)||(s.etiquetas.length<6?a(k=>({...k,etiquetas:[...k.etiquetas,j]})):alert("❌ Máximo 6 etiquetas permitidas"))},w=b=>{a(j=>({...j,etiquetas:j.etiquetas.filter(k=>k!==b)}))},f=b=>{const j=parseInt(b.target.value);if(j===-1){window.location.href="/eventos";return}s.festividades.includes(j)||(s.festividades.length<5?a(k=>({...k,festividades:[...k.festividades,j]})):alert("❌ Máximo 5 festividades permitidas"))},v=b=>{a(j=>({...j,festividades:j.festividades.filter(k=>k!==b)}))},x=b=>{const j=Array.from(b.target.files);if(j.length+s.imagenes.length>3){alert("❌ Solo puedes subir un máximo de 3 imágenes");return}const k=j.map(z=>new Promise(L=>{const T=new FileReader;T.onloadend=()=>{L({file:z,preview:T.result})},T.readAsDataURL(z)}));Promise.all(k).then(z=>{a(L=>({...L,imagenes:[...L.imagenes,...z]}))})},h=b=>{a(j=>{const k=[...j.imagenes];return k.splice(b,1),{...j,imagenes:k}})},y=async()=>{try{const b=s.imagenes.map(async j=>{const k=new FormData;k.append("file",j.file),k.append("upload_preset","megadisfraz");const z=await fetch("https://api.cloudinary.com/v1_1/dxnnwuzrl/image/upload",{method:"POST",body:k});if(!z.ok){const L=await z.json();throw new Error(L.message||"Error al subir imagen")}return z.json()});return await Promise.all(b)}catch(b){throw console.error("Error al subir imágenes:",b),b}},A=async b=>{if(b.preventDefault(),d(!0),s.imagenes.length===0){alert("❌ Debes subir al menos una imagen"),d(!1);return}if(s.festividades.length===0){alert("❌ Debes seleccionar al menos una festividad"),d(!1);return}try{const k=(await y()).map(X=>X.secure_url),z={nombre:s.nombre.trim(),descripcion:s.descripcion.trim(),festividades:s.festividades,etiquetas:s.etiquetas,imagenes:k},L=await fetch("https://backend-mywf.onrender.com/api/disfraz/registro",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(z)}),T=await L.json();if(!L.ok)throw new Error(T.msg||"Error al crear el disfraz");alert("✅ Disfraz creado exitosamente"),a({nombre:"",etiquetas:[],festividades:[],descripcion:"",imagenes:[]})}catch(j){console.error("Error completo:",j),alert(j.message||"Hubo un problema al crear el disfraz")}finally{d(!1)}};return l?e.jsxs("div",{className:"form-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Cargando datos necesarios..."})]}):n?e.jsxs("div",{className:"form-container",children:[e.jsx("p",{className:"error-message",children:n}),e.jsx("button",{className:"form-button",onClick:()=>window.location.reload(),children:"Reintentar"})]}):e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:A,className:"form-content",children:[e.jsx("h2",{children:"Crear Disfraz"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:s.nombre,onChange:C,required:!0,maxLength:100})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"etiquetas",children:"Etiquetas (máx. 6):"}),e.jsxs("select",{id:"etiquetas",name:"etiquetas",className:"form-input1",onChange:g,value:"",children:[e.jsx("option",{value:"",children:"Seleccione una etiqueta"}),c.map(b=>e.jsx("option",{value:b.id,children:b.nombre},b.id)),e.jsx("option",{value:"-1",children:"➕ Crear nueva etiqueta"})]}),e.jsx("ul",{className:"etiquetas-list",children:s.etiquetas.map(b=>{const j=c.find(k=>k.id===b);return e.jsxs("li",{children:[(j==null?void 0:j.nombre)||"Etiqueta desconocida",e.jsx("button",{type:"button",className:"remove-button",onClick:()=>w(b),children:"X"})]},b)})}),e.jsxs("p",{className:s.etiquetas.length>=6?"text-error":"",children:[s.etiquetas.length," / 6 etiquetas seleccionadas"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"festividad",children:"Festividades (máx. 5):"}),e.jsxs("select",{id:"festividad",name:"festividad",className:"form-input1",onChange:f,value:"",children:[e.jsx("option",{value:"",children:"Seleccione una festividad"}),u.map(b=>e.jsxs("option",{value:b.id,children:[b.nombre," - ",b.mes,"/",b.dia]},b.id)),e.jsx("option",{value:"-1",children:"➕ Crear nueva festividad"})]}),e.jsx("ul",{className:"festividades-list",children:s.festividades.map(b=>{const j=u.find(k=>k.id===b);return e.jsxs("li",{children:[(j==null?void 0:j.nombre)||"Festividad desconocida",e.jsx("button",{type:"button",className:"remove-button",onClick:()=>v(b),children:"X"})]},b)})}),e.jsxs("p",{className:s.festividades.length>=5?"text-error":"",children:[s.festividades.length," / 5 festividades seleccionadas"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descripcion",children:"Descripción (máx. 250 caracteres):"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input1",maxLength:250,value:s.descripcion,onChange:C,required:!0}),e.jsxs("p",{className:s.descripcion.length>=250?"text-error":"",children:[s.descripcion.length," / 250 caracteres",s.descripcion.length>=250&&" (Límite alcanzado)"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Imágenes (máximo 3):"}),e.jsxs("div",{className:"image-preview-container",children:[s.imagenes.map((b,j)=>e.jsxs("div",{className:"image-box",children:[e.jsx("img",{src:b.preview,alt:`Preview ${j}`,className:"preview-img"}),e.jsx("button",{type:"button",className:"remove-button",onClick:()=>h(j),"aria-label":"Eliminar imagen",children:"X"})]},j)),s.imagenes.length<3&&e.jsxs("div",{className:"image-box upload-box",children:[e.jsxs("label",{className:"add-image-label",children:["+",e.jsx("input",{type:"file",accept:"image/*",onChange:x,hidden:!0,multiple:!0,"aria-label":"Añadir imagen"})]}),e.jsx("p",{className:"add-image-text",children:"Añadir imagen"})]})]})]}),e.jsx("button",{type:"submit",className:"form-button",disabled:t,children:t?"Creando...":"Crear Disfraz"})]})})},ss=()=>{const[s,a]=o.useState([]),[u,m]=o.useState([]),[c,i]=o.useState([]),[l,p]=o.useState([]),[n,r]=o.useState({nombre:"",festividades:[],descripcion:"",etiquetas:[],imagenes:[]}),[t,d]=o.useState(null),[N,q]=o.useState(""),[C,g]=o.useState(!0),[w,f]=o.useState(null),[v,x]=o.useState(!1),[h,y]=o.useState(!1),A=E=>{const S=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return[...E].sort((D,$)=>{const I=S.indexOf(D.mes),J=S.indexOf($.mes);return I!==J?I-J:D.dia-$.dia})},b=E=>[...E].sort((S,D)=>S.nombre.localeCompare(D.nombre));o.useEffect(()=>{(async()=>{try{g(!0);const[S,D,$]=await Promise.all([fetch("https://backend-mywf.onrender.com/api/disfraz/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("https://backend-mywf.onrender.com/api/etiqueta/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("https://backend-mywf.onrender.com/api/festividad/festividades",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})]);if(!S.ok||!D.ok||!$.ok)throw new Error("Error al cargar datos iniciales");const[I,J,R]=await Promise.all([S.json(),D.json(),$.json()]);a(I),m(I),i(b(J||[])),p(A(R||[])),g(!1)}catch(S){console.error("❌ Error al cargar datos:",S),f("Hubo un problema al cargar la información inicial"),g(!1)}})()},[]),o.useEffect(()=>{if(N.trim()==="")m(s);else{const E=s.filter(S=>{var D,$;return S.nombre.toLowerCase().includes(N.toLowerCase())||((D=S.etiquetas)==null?void 0:D.some(I=>I.nombre.toLowerCase().includes(N.toLowerCase())))||(($=S.festividades)==null?void 0:$.some(I=>I.nombre.toLowerCase().includes(N.toLowerCase())))});m(E)}},[N,s]);const j=async E=>{var S,D;try{const I=await(await fetch(`https://backend-mywf.onrender.com/api/disfraz/detalle/${E}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),J=I.imagenes.map(R=>({url:R,preview:R}));r({nombre:I.nombre,descripcion:I.descripcion,festividades:((S=I.festividades)==null?void 0:S.map(R=>R.id))||[],etiquetas:((D=I.etiquetas)==null?void 0:D.map(R=>R.id))||[],imagenes:J}),d(E),y(!0)}catch($){console.error("Error al cargar detalles del disfraz:",$),alert("Error al cargar detalles del disfraz")}},k=async E=>{if(window.confirm("¿Estás seguro de que deseas eliminar este disfraz?"))try{if(!(await fetch(`https://backend-mywf.onrender.com/api/disfraz/eliminar/${E}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar el disfraz");alert("✅ Disfraz eliminado exitosamente");const $=s.filter(I=>I.id!==E);a($),m($),d(null),y(!1)}catch(D){console.error("❌ Error al eliminar el disfraz:",D),alert("❌ Hubo un problema al eliminar el disfraz")}},z=E=>{const{name:S,value:D}=E.target;r($=>({...$,[S]:D}))},L=E=>{const S=parseInt(E.target.value);if(S===-1)return alert("Redirigir a crear etiqueta");!n.etiquetas.includes(S)&&n.etiquetas.length<6&&r({...n,etiquetas:[...n.etiquetas,S]})},T=E=>{r({...n,etiquetas:n.etiquetas.filter(S=>S!==E)})},X=E=>{const S=parseInt(E.target.value);if(S===-1)return alert("Redirigir a crear festividad");!n.festividades.includes(S)&&n.festividades.length<5&&r({...n,festividades:[...n.festividades,S]})},je=E=>{r({...n,festividades:n.festividades.filter(S=>S!==E)})},be=E=>{const $=Array.from(E.target.files).slice(0,3-n.imagenes.length).map(I=>({file:I,preview:URL.createObjectURL(I)}));r(I=>({...I,imagenes:[...I.imagenes,...$]}))},ge=E=>{r(S=>({...S,imagenes:S.imagenes.filter((D,$)=>$!==E)}))},ve=async E=>{E.preventDefault(),alert("Formulario enviado correctamente"),y(!1)};return C?e.jsxs("div",{className:"form-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Cargando datos necesarios..."})]}):w?e.jsxs("div",{className:"form-container",children:[e.jsx("p",{className:"error-message",children:w}),e.jsx("button",{className:"form-button",onClick:()=>window.location.reload(),children:"Reintentar"})]}):e.jsx("div",{className:"form-container",children:h?e.jsxs("form",{onSubmit:ve,className:"form-content",children:[e.jsx("h2",{children:"Editar Disfraz"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:n.nombre,onChange:z,required:!0,maxLength:100})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"etiquetas",children:"Etiquetas (máx. 6):"}),e.jsxs("select",{id:"etiquetas",name:"etiquetas",className:"form-input1",onChange:L,value:"",children:[e.jsx("option",{value:"",children:"Seleccione una etiqueta"}),c.map(E=>e.jsx("option",{value:E.id,children:E.nombre},E.id)),e.jsx("option",{value:"-1",children:"➕ Crear nueva etiqueta"})]}),e.jsx("ul",{className:"etiquetas-list",children:n.etiquetas.map(E=>{const S=c.find(D=>D.id===E);return e.jsxs("li",{children:[(S==null?void 0:S.nombre)||"Etiqueta desconocida",e.jsx("button",{type:"button",className:"remove-button",onClick:()=>T(E),children:"X"})]},E)})}),e.jsxs("p",{className:n.etiquetas.length>=6?"text-error":"",children:[n.etiquetas.length," / 6 etiquetas seleccionadas"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"festividad",children:"Festividades (máx. 5):"}),e.jsxs("select",{id:"festividad",name:"festividad",className:"form-input1",onChange:X,value:"",children:[e.jsx("option",{value:"",children:"Seleccione una festividad"}),l.map(E=>e.jsxs("option",{value:E.id,children:[E.nombre," - ",E.mes,"/",E.dia]},E.id)),e.jsx("option",{value:"-1",children:"➕ Crear nueva festividad"})]}),e.jsx("ul",{className:"festividades-list",children:n.festividades.map(E=>{const S=l.find(D=>D.id===E);return e.jsxs("li",{children:[(S==null?void 0:S.nombre)||"Festividad desconocida",e.jsx("button",{type:"button",className:"remove-button",onClick:()=>je(E),children:"X"})]},E)})}),e.jsxs("p",{className:n.festividades.length>=5?"text-error":"",children:[n.festividades.length," / 5 festividades seleccionadas"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descripcion",children:"Descripción (máx. 250 caracteres):"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input1",value:n.descripcion,onChange:z,maxLength:250,required:!0}),e.jsxs("p",{className:n.descripcion.length>=250?"text-error":"",children:[n.descripcion.length," / 250 caracteres",n.descripcion.length>=250&&" (Límite alcanzado)"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Imágenes (máximo 3):"}),e.jsxs("div",{className:"image-preview-container",children:[n.imagenes.map((E,S)=>e.jsxs("div",{className:"image-box",children:[e.jsx("img",{src:E.preview||E.url,alt:`Preview ${S}`,className:"preview-img"}),e.jsx("button",{type:"button",className:"remove-button",onClick:()=>ge(S),"aria-label":"Eliminar imagen",children:"X"})]},S)),n.imagenes.length<3&&e.jsxs("div",{className:"image-box upload-box",children:[e.jsxs("label",{className:"add-image-label",children:["+",e.jsx("input",{type:"file",accept:"image/*",onChange:be,hidden:!0,multiple:!0,"aria-label":"Añadir imagen"})]}),e.jsx("p",{className:"add-image-text",children:"Añadir imagen"})]})]})]}),e.jsx("button",{type:"submit",className:"form-button",disabled:v,children:v?"Actualizando...":"Guardar Cambios"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{y(!1),d(null)},children:"Cancelar"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"titlelistDis",children:"Lista de Disfraces"}),e.jsxs("div",{className:"form-content",children:[e.jsx("label",{htmlFor:"busqueda",children:"Buscar por Nombre, Etiqueta o Festividad:"}),e.jsx("input",{type:"text",id:"busqueda",name:"busqueda",className:"form-input",value:N,onChange:E=>q(E.target.value),placeholder:"Ingrese un nombre, etiqueta o festividad"})]}),e.jsx("ul",{className:"disfraz-list",children:u.map(E=>{var S,D;return e.jsxs("li",{className:"disfraz-item",children:[e.jsxs("div",{className:"disfraz-info",children:[e.jsx("strong",{children:"Nombre:"})," ",E.nombre," ",e.jsx("br",{}),e.jsx("strong",{children:"Etiquetas:"})," ",(S=E.etiquetas)==null?void 0:S.map($=>$.nombre).join(", "),e.jsx("br",{}),e.jsx("strong",{children:"Festividades:"})," ",(D=E.festividades)==null?void 0:D.map($=>$.nombre).join(", "),e.jsx("br",{})]}),e.jsxs("div",{className:"disfraz-actions",children:[e.jsx("button",{onClick:()=>j(E.id),className:"edit-button2",children:"Editar"}),e.jsx("button",{onClick:()=>k(E.id),className:"delete-button2",children:"Eliminar"})]})]},E.id)})})]})})},as=()=>{const[s,a]=o.useState(null);return e.jsxs("div",{className:"admin-container",children:[e.jsx("h1",{className:"admin-title",children:"Gestión de Disfraces"}),e.jsxs("div",{className:"admin-buttons-container",children:[e.jsx("button",{className:"admin-button button-crear",onClick:()=>a("crear"),children:"Crear Disfraz"}),e.jsx("button",{className:"admin-button button-actualizar",onClick:()=>a("editar"),children:"Editar Disfraz"})]}),e.jsxs("div",{className:"admin-module-container",style:{marginTop:"20px"},children:[s==="crear"&&e.jsx(es,{}),s==="editar"&&e.jsx(ss,{})]})]})},rs=()=>{const[s,a]=o.useState({nombre:"",apellido:"",direccion:"",telefono:"",email:"",password:"",rol:"moderador"}),[u,m]=o.useState(""),c=l=>{const{name:p,value:n}=l.target;a({...s,[p]:n})},i=async l=>{l.preventDefault();try{const p=await fetch("https://backend-mywf.onrender.com/api/admin/crear-moderador",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)}),n=await p.json();if(!p.ok)throw new Error(n.msg||"Error al crear administrador");m("✅ Administrador creado correctamente"),a({nombre:"",apellido:"",direccion:"",telefono:"",email:"",password:"",rol:"moderador"})}catch(p){m(`❌ ${p.message}`)}};return e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:i,className:"form-content",children:[e.jsx("h2",{children:"Crear Administrador"}),u&&e.jsx("p",{className:"mensaje",children:u}),["nombre","apellido","direccion","telefono","email","password"].map(l=>e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:l,children:[l.charAt(0).toUpperCase()+l.slice(1),":"]}),e.jsx("input",{type:l==="password"?"password":l==="email"?"email":"text",id:l,name:l,className:"form-input",value:s[l],onChange:c,required:!0})]},l)),e.jsx("button",{type:"submit",className:"form-button",children:"Crear"})]})})},ts=()=>{const[s,a]=o.useState([]),[u,m]=o.useState([]),[c,i]=o.useState(null),[l,p]=o.useState({nombre:"",apellido:"",direccion:"",telefono:"",email:"",contraseña:""}),[n,r]=o.useState("");o.useEffect(()=>{(async()=>{try{const g=await fetch("https://backend-mywf.onrender.com/api/admin/listar-moderadores",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!g.ok)throw new Error("Error al obtener la lista de administradores");const w=await g.json();a(w),m(w)}catch(g){console.error("Error al cargar los administradores:",g),alert("Hubo un problema al cargar los administradores")}})()},[]),o.useEffect(()=>{if(n.trim()==="")m(s);else{const C=s.filter(g=>g.email.toLowerCase().includes(n.toLowerCase()));m(C)}},[n,s]);const t=async C=>{try{const g=await fetch(`https://backend-mywf.onrender.com/api/admin/detalle-moderador/${C}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!g.ok)throw new Error("Error al obtener los detalles del administrador");const w=await g.json();p(w),i(C)}catch(g){console.error("Error al cargar los detalles del administrador:",g),alert("Hubo un problema al cargar los detalles del administrador")}},d=async C=>{if(window.confirm("¿Estás seguro de que deseas eliminar este administrador?"))try{if(!(await fetch(`https://backend-mywf.onrender.com/api/admin/eliminar-moderador/${C}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar el administrador");alert("Administrador eliminado exitosamente");const f=s.filter(v=>v.id!==C);a(f),m(f),r("")}catch(w){console.error("Error al eliminar el administrador:",w),alert("Hubo un problema al eliminar el administrador")}},N=C=>{const{name:g,value:w}=C.target;p({...l,[g]:w})},q=async C=>{C.preventDefault();try{const g=await fetch(`https://backend-mywf.onrender.com/api/admin/actualizar-moderador/${c}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(l)});if(!g.ok)throw new Error("Error al actualizar el administrador");const w=await g.json();alert("Administrador actualizado exitosamente"),console.log("Administrador actualizado:",w),a(f=>f.map(v=>v.id===c?{...v,...l}:v)),m(f=>f.map(v=>v.id===c?{...v,...l}:v)),i(null)}catch(g){console.error("Error al actualizar el administrador:",g),alert("Hubo un problema al actualizar el administrador")}};return e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{className:"listadmin",children:"Lista de Administradores"}),e.jsxs("div",{className:"form-content",children:[e.jsx("label",{className:"titlebusc",htmlFor:"email",children:"Buscar por Correo Electrónico:"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",value:n,onChange:C=>r(C.target.value),placeholder:"Ingrese un correo electrónico"})]}),e.jsx("ul",{className:"admin-list",children:u.map(C=>e.jsxs("li",{className:"admin-item",children:[e.jsx("strong",{children:"Nombre:"})," ",C.nombre," ",C.apellido," ",e.jsx("br",{}),e.jsx("strong",{children:"Email:"})," ",C.email," ",e.jsx("br",{}),e.jsx("button",{onClick:()=>t(C.id),className:"edit-button",children:"Editar"}),e.jsx("button",{onClick:()=>d(C.id),className:"delete-button",children:"Eliminar"}),e.jsx("hr",{})]},C.id))}),c&&e.jsxs("form",{onSubmit:q,className:"form-content",children:[e.jsx("h2",{children:"Actualizar Administrador"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:l.nombre,onChange:N,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"apellido",children:"Apellido:"}),e.jsx("input",{type:"text",id:"apellido",name:"apellido",className:"form-input",value:l.apellido,onChange:N,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"direccion",children:"Dirección:"}),e.jsx("input",{type:"text",id:"direccion",name:"direccion",className:"form-input",value:l.direccion,onChange:N,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"telefono",children:"Teléfono:"}),e.jsx("input",{type:"tel",id:"telefono",name:"telefono",className:"form-input",value:l.telefono,onChange:N,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email:"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",value:l.email,onChange:N,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"contraseña",children:"Contraseña:"}),e.jsx("input",{type:"password",id:"contraseña",name:"contraseña",className:"form-input",value:l.contraseña,onChange:N,required:!0})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Actualizar"})]})]})},ns=()=>{const[s,a]=o.useState(null);return e.jsxs("div",{className:"admin-container",children:[e.jsx("h1",{className:"admin-title",children:"Gestión de Administradores"}),e.jsxs("div",{className:"admin-buttons-container",children:[e.jsx("button",{className:"admin-button button-crear",onClick:()=>a("crear"),children:"Crear Administrador"}),e.jsx("button",{className:"admin-button button-actualizar",onClick:()=>a("actualizar"),children:"Actualizar Administrador"})]}),e.jsxs("div",{className:"admin-module-container",children:[s==="crear"&&e.jsx(rs,{}),s==="actualizar"&&e.jsx(ts,{})]})]})},os=()=>{const[s,a]=o.useState({nombre:"",descripcion:""}),u=c=>{const{name:i,value:l}=c.target;a({...s,[i]:l})},m=async c=>{c.preventDefault();try{const i=await fetch("https://backend-mywf.onrender.com/api/etiqueta/crear",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)});if(!i.ok)throw new Error("Error al crear la etiqueta");const l=await i.json();alert("✅ Etiqueta creada exitosamente"),console.log("Etiqueta creada:",l),a({nombre:"",descripcion:""})}catch(i){console.error("Error al crear la etiqueta:",i),alert("❌ Hubo un problema al crear la etiqueta")}};return e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{className:"title-crear-etiquetas",children:"Crear Etiqueta"}),e.jsxs("form",{onSubmit:m,className:"form-content",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:s.nombre,onChange:u,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descripcion",children:"Descripción:"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input",value:s.descripcion,onChange:u,required:!0})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Crear"})]})]})},is=()=>{const[s,a]=o.useState([]),[u,m]=o.useState([]),[c,i]=o.useState(""),[l,p]=o.useState(!1),[n,r]=o.useState({nombre:"",descripcion:""}),[t,d]=o.useState("");o.useEffect(()=>{(async()=>{try{const v=await(await fetch("https://backend-mywf.onrender.com/api/etiqueta/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();a(v),m(v)}catch(f){console.error("Error al cargar etiquetas:",f),alert("Error al cargar etiquetas")}})()},[]),o.useEffect(()=>{if(t.trim()==="")m(s);else{const w=s.filter(f=>f.nombre.toLowerCase().includes(t.toLowerCase()));m(w)}},[t,s]);const N=w=>{const f=s.find(v=>v.id===w);f&&(i(w),r({nombre:f.nombre,descripcion:f.descripcion}),p(!0))},q=w=>{const{name:f,value:v}=w.target;r({...n,[f]:v})},C=async w=>{w.preventDefault();try{if(!(await fetch(`https://backend-mywf.onrender.com/api/etiqueta/actualizar/${c}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(n)})).ok)throw new Error;alert("✅ Etiqueta actualizada"),a(s.map(v=>v.id===c?{...v,...n}:v)),m(u.map(v=>v.id===c?{...v,...n}:v)),p(!1),i("")}catch{alert("❌ Error al actualizar etiqueta")}},g=async w=>{if(confirm("¿Eliminar esta etiqueta?"))try{if(!(await fetch(`https://backend-mywf.onrender.com/api/etiqueta/eliminar/${w}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error;const v=s.filter(x=>x.id!==w);a(v),m(v)}catch{alert("❌ Error al eliminar")}};return e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{children:"Actualizar Etiquetas"}),l?e.jsxs("form",{onSubmit:C,className:"form-content",children:[e.jsx("input",{type:"text",name:"nombre",value:n.nombre,onChange:q,className:"form-input",required:!0}),e.jsx("textarea",{name:"descripcion",value:n.descripcion,onChange:q,className:"form-input",required:!0}),e.jsx("button",{type:"submit",className:"form-button",children:"Guardar Cambios"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{p(!1),i("")},children:"Cancelar"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-content",children:[e.jsx("label",{children:"Buscar por Nombre:"}),e.jsx("input",{type:"text",className:"form-input",value:t,onChange:w=>d(w.target.value),placeholder:"Ingrese un nombre"})]}),e.jsx("ul",{className:"etiquetas-list",children:u.map(w=>e.jsxs("li",{children:[e.jsx("strong",{children:"Nombre:"})," ",w.nombre," ",e.jsx("br",{}),e.jsx("strong",{children:"Descripción:"})," ",w.descripcion,e.jsx("br",{}),e.jsx("button",{onClick:()=>N(w.id),className:"edit-button3",children:"Editar"}),e.jsx("button",{onClick:()=>g(w.id),className:"delete-button3",children:"Eliminar"}),e.jsx("hr",{})]},w.id))})]})]})},cs=()=>{const[s,a]=o.useState(null);return e.jsxs("div",{className:"admin-container",children:[e.jsx("h1",{className:"admin-title",children:"Gestión de Etiquetas"}),e.jsxs("div",{className:"admin-buttons-container",children:[e.jsx("button",{className:"admin-button button-crear",onClick:()=>a("crear"),children:"Crear Etiqueta"}),e.jsx("button",{className:"admin-button button-editar",onClick:()=>a("editar"),children:"Actualizar Etiqueta"})]}),e.jsxs("div",{className:"admin-module-container",style:{marginTop:"20px"},children:[s==="crear"&&e.jsx(os,{}),s==="editar"&&e.jsx(is,{})]})]})},V=()=>{const[s,a]=o.useState(!1),[u,m]=o.useState("");return o.useEffect(()=>{const c=localStorage.getItem("token"),i=localStorage.getItem("tipoUsuario");a(!!c),m(i)},[]),s?e.jsx(ue,{to:"/"}):e.jsx("main",{className:"flex justify-center content-center w-full h-screen",children:e.jsx(de,{})})},_=({children:s,allowedRoles:a})=>{const u=localStorage.getItem("token"),m=localStorage.getItem("tipoUsuario");return!u||a&&!a.includes(m)?e.jsx(ue,{to:"/"}):s};function ls(){return e.jsx(Oe,{children:e.jsx(Ie,{children:e.jsx(Me,{children:e.jsx(ze,{children:e.jsx("div",{className:"app-container",children:e.jsx("div",{className:"main-content",children:e.jsxs(De,{children:[e.jsxs(P,{path:"/",element:e.jsx(Te,{}),children:[e.jsx(P,{index:!0,element:e.jsx(Re,{})}),e.jsx(P,{path:"productos/:id",element:e.jsx(Be,{})}),e.jsx(P,{path:"searches",element:e.jsx(Ve,{})})," ",e.jsx(P,{path:"perfil",element:e.jsx(_,{allowedRoles:["admin","usuario","moderador"],children:e.jsx(Xe,{})})}),e.jsx(P,{path:"eventos",element:e.jsx(_,{allowedRoles:["admin","moderador"],children:e.jsx(Ke,{})})}),e.jsx(P,{path:"disfraces",element:e.jsx(_,{allowedRoles:["admin","moderador"],children:e.jsx(as,{})})}),e.jsx(P,{path:"etiquetas",element:e.jsx(_,{allowedRoles:["admin","moderador"],children:e.jsx(cs,{})})}),e.jsx(P,{path:"administradores",element:e.jsx(_,{allowedRoles:["admin"],children:e.jsx(ns,{})})})]}),e.jsx(P,{path:"/login",element:e.jsx(V,{}),children:e.jsx(P,{index:!0,element:e.jsx(Je,{})})}),e.jsx(P,{path:"/register",element:e.jsx(V,{}),children:e.jsx(P,{index:!0,element:e.jsx(_e,{})})}),e.jsx(P,{path:"/confirm/:token",element:e.jsx(He,{})}),e.jsx(P,{path:"/forgot/id",element:e.jsx(Ge,{})}),e.jsx(P,{path:"/recuperar-password/:token",element:e.jsx(We,{})}),e.jsx(P,{path:"*",element:e.jsx(Qe,{})})]})})})})})})})}$e.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(ls,{})}));
